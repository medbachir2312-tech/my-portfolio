import{a as E}from"./chunk-6PQRH2FH.js";import{$ as P,C as s,D as b,J as p,L as m,N as M,O as t,P as n,Q as d,R as x,S as f,T as v,U as i,V as c,W as h,Y as O,aa as y,ha as S,ia as k,ja as w,ka as z,q as C,u,ua as I,v as _}from"./chunk-SI7HL3TP.js";function T(a,g){a&1&&(t(0,"span",22),i(1,"Nouveau"),n())}function A(a,g){if(a&1){let e=x();t(0,"button",20),f("click",function(){u(e);let o=v().$implicit,l=v();return _(l.markAsRead(o.id))}),d(1,"i",23),i(2," Marquer comme lu "),n()}}function R(a,g){if(a&1){let e=x();t(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3"),i(4),n(),t(5,"span",12),i(6),n()(),t(7,"div",13)(8,"span",14),i(9),P(10,"date"),n(),p(11,T,2,0,"span",15),n()(),t(12,"div",16)(13,"strong"),i(14),n()(),t(15,"div",17)(16,"p"),i(17),n()(),t(18,"div",18),p(19,A,3,0,"button",19),t(20,"button",20),f("click",function(){let o=u(e).$implicit,l=v();return _(l.deleteMessage(o.id))}),d(21,"i",21),i(22," Supprimer "),n()()()}if(a&2){let e=g.$implicit;M("unread",!e.read),s(4),c(e.name),s(2),c(e.email),s(3),c(y(10,9,e.date,"short")),s(2),m("ngIf",!e.read),s(3),c(e.subject),s(3),c(e.message),s(2),m("ngIf",!e.read)}}function j(a,g){a&1&&(t(0,"div",24),d(1,"i",25),t(2,"p"),i(3,"Aucun message pour le moment"),n()())}var q=(()=>{class a{constructor(e){this.contactService=e,this.messages=[],this.unreadCount=0}ngOnInit(){this.contactService.messages$.subscribe(e=>{this.messages=e.sort((r,o)=>o.date.getTime()-r.date.getTime()),this.unreadCount=e.filter(r=>!r.read).length})}markAsRead(e){this.contactService.markAsRead(e)}markAllAsRead(){this.contactService.markAllAsRead()}deleteMessage(e){confirm("\xCAtes-vous s\xFBr de vouloir supprimer ce message ?")&&this.contactService.deleteMessage(e)}static{this.\u0275fac=function(r){return new(r||a)(b(E))}}static{this.\u0275cmp=C({type:a,selectors:[["app-messages"]],standalone:!0,features:[O],decls:13,vars:3,consts:[[1,"admin-page"],[1,"admin-header"],[1,"header-actions"],[1,"badge"],[1,"btn","btn-outline","btn-sm",3,"click"],[1,"fas","fa-check-double"],[1,"messages-list"],["class","message-card card",3,"unread",4,"ngFor","ngForOf"],["class","no-messages",4,"ngIf"],[1,"message-card","card"],[1,"message-header"],[1,"message-info"],[1,"message-email"],[1,"message-meta"],[1,"message-date"],["class","unread-badge",4,"ngIf"],[1,"message-subject"],[1,"message-content"],[1,"message-actions"],["class","btn btn-sm btn-outline",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline",3,"click"],[1,"fas","fa-trash"],[1,"unread-badge"],[1,"fas","fa-check"],[1,"no-messages"],[1,"fas","fa-inbox"]],template:function(r,o){r&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),i(3,"Messages de Contact"),n(),t(4,"div",2)(5,"span",3),i(6),n(),t(7,"button",4),f("click",function(){return o.markAllAsRead()}),d(8,"i",5),i(9," Tout marquer comme lu "),n()()(),t(10,"div",6),p(11,R,23,12,"div",7)(12,j,4,0,"div",8),n()()),r&2&&(s(6),h("",o.unreadCount," non lus"),s(5),m("ngForOf",o.messages),s(),m("ngIf",o.messages.length===0))},dependencies:[z,S,k,w,I],styles:[".admin-page[_ngcontent-%COMP%]{padding:var(--spacing-2xl)}.admin-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-2xl);flex-wrap:wrap;gap:var(--spacing-md)}.admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-size-3xl);font-weight:800;margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.badge[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-md);background:linear-gradient(135deg,var(--color-primary),var(--color-secondary));color:#fff;border-radius:var(--radius-full);font-weight:600;font-size:var(--font-size-sm)}.messages-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-lg)}.message-card[_ngcontent-%COMP%]{padding:var(--spacing-xl)}.message-card.unread[_ngcontent-%COMP%]{border-left:4px solid var(--color-primary);background-color:#6366f10d}.message-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:var(--spacing-md);gap:var(--spacing-md)}.message-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:var(--font-size-lg);font-weight:700;margin:0 0 var(--spacing-xs) 0}.message-email[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-size:var(--font-size-sm)}.message-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--spacing-xs)}.message-date[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-size:var(--font-size-sm)}.unread-badge[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);background-color:var(--color-primary);color:#fff;border-radius:var(--radius-sm);font-size:var(--font-size-xs);font-weight:600}.message-subject[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md);font-size:var(--font-size-base)}.message-content[_ngcontent-%COMP%]{padding:var(--spacing-md);background-color:var(--color-bg-secondary);border-radius:var(--radius-md);margin-bottom:var(--spacing-md)}.message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary);line-height:1.6}.message-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);flex-wrap:wrap}.no-messages[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-3xl);color:var(--color-text-tertiary)}.no-messages[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg)}.no-messages[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--font-size-lg)}"]})}}return a})();export{q as MessagesComponent};
