import{a as O,b as f,c as w,d as E,e as I,f as z,g as F,h as k,i as L}from"./chunk-EQQ523GQ.js";import{a as P}from"./chunk-EJGBD257.js";import{C as o,D as c,J as g,L as l,N as p,O as t,P as n,Q as a,S as h,T as b,U as r,V as _,Y as C,ia as x,ka as y,na as M,pa as S,q as v}from"./chunk-SI7HL3TP.js";function N(i,d){if(i&1&&(t(0,"div",25),a(1,"i",26),t(2,"p"),r(3),n()()),i&2){let m=b();o(3),_(m.errorMessage)}}function T(i,d){i&1&&(t(0,"span",27),r(1," Le nom d'utilisateur est requis "),n())}function j(i,d){i&1&&(t(0,"span",27),r(1," Le mot de passe est requis "),n())}function A(i,d){i&1&&(t(0,"span"),a(1,"i",28),r(2," Se connecter "),n())}function q(i,d){i&1&&(t(0,"span"),a(1,"i",29),r(2," Connexion... "),n())}var J=(()=>{class i{constructor(m,s,e,u){this.fb=m,this.authService=s,this.router=e,this.route=u,this.isSubmitting=!1,this.errorMessage="",this.returnUrl="/admin/dashboard"}ngOnInit(){if(this.authService.isAuthenticated()){this.router.navigate(["/admin/dashboard"]);return}this.initForm(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/admin/dashboard"}initForm(){this.loginForm=this.fb.group({username:["",[f.required]],password:["",[f.required]]})}get f(){return this.loginForm.controls}onSubmit(){if(this.loginForm.invalid){Object.keys(this.loginForm.controls).forEach(e=>{this.loginForm.controls[e].markAsTouched()});return}this.isSubmitting=!0,this.errorMessage="";let{username:m,password:s}=this.loginForm.value;setTimeout(()=>{this.authService.login(m,s)?this.router.navigate([this.returnUrl]):(this.errorMessage="Identifiants incorrects. Veuillez r\xE9essayer.",this.isSubmitting=!1)},500)}static{this.\u0275fac=function(s){return new(s||i)(c(k),c(P),c(S),c(M))}}static{this.\u0275cmp=v({type:i,selectors:[["app-login"]],standalone:!0,features:[C],decls:39,vars:11,consts:[[1,"login-page"],[1,"login-container"],[1,"login-card","card"],[1,"login-header"],[1,"login-icon"],[1,"fas","fa-shield-alt"],[1,"login-title"],[1,"login-subtitle"],["class","alert alert-error",4,"ngIf"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","username",1,"form-label"],[1,"fas","fa-user"],["type","text","id","username","formControlName","username","placeholder","admin","autocomplete","username",1,"form-control"],["class","error-message",4,"ngIf"],["for","password",1,"form-label"],[1,"fas","fa-lock"],["type","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","autocomplete","current-password",1,"form-control"],["type","submit",1,"btn","btn-primary","btn-lg","login-btn",3,"disabled"],[4,"ngIf"],[1,"login-footer"],[1,"login-info"],[1,"fas","fa-info-circle"],["href","/",1,"back-link"],[1,"fas","fa-arrow-left"],[1,"alert","alert-error"],[1,"fas","fa-exclamation-circle"],[1,"error-message"],[1,"fas","fa-sign-in-alt"],[1,"fas","fa-spinner","fa-spin"]],template:function(s,e){s&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),a(5,"i",5),n(),t(6,"h1",6),r(7,"Administration"),n(),t(8,"p",7),r(9,"Connectez-vous pour acc\xE9der au panneau d'administration"),n()(),g(10,N,4,1,"div",8),t(11,"form",9),h("ngSubmit",function(){return e.onSubmit()}),t(12,"div",10)(13,"label",11),a(14,"i",12),r(15," Nom d'utilisateur "),n(),a(16,"input",13),g(17,T,2,0,"span",14),n(),t(18,"div",10)(19,"label",15),a(20,"i",16),r(21," Mot de passe "),n(),a(22,"input",17),g(23,j,2,0,"span",14),n(),t(24,"button",18),g(25,A,3,0,"span",19)(26,q,3,0,"span",19),n()(),t(27,"div",20)(28,"p",21),a(29,"i",22),r(30," Credentials par d\xE9faut: "),t(31,"strong"),r(32,"admin"),n(),r(33," / "),t(34,"strong"),r(35,"admin123"),n()(),t(36,"a",23),a(37,"i",24),r(38," Retour au site "),n()()()()()),s&2&&(o(10),l("ngIf",e.errorMessage),o(),l("formGroup",e.loginForm),o(5),p("error",e.f.username.invalid&&e.f.username.touched),o(),l("ngIf",e.f.username.invalid&&e.f.username.touched),o(5),p("error",e.f.password.invalid&&e.f.password.touched),o(),l("ngIf",e.f.password.invalid&&e.f.password.touched),o(),l("disabled",e.isSubmitting),o(),l("ngIf",!e.isSubmitting),o(),l("ngIf",e.isSubmitting))},dependencies:[y,x,L,I,O,w,E,z,F],styles:[".login-page[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#6366f11a,#ec48991a);padding:var(--spacing-xl)}.login-container[_ngcontent-%COMP%]{width:100%;max-width:450px}.login-card[_ngcontent-%COMP%]{padding:var(--spacing-3xl);animation:fadeIn .5s ease-out}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-2xl)}.login-icon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:80px;height:80px;background:linear-gradient(135deg,var(--color-primary),var(--color-secondary));color:#fff;border-radius:var(--radius-2xl);font-size:2.5rem;margin-bottom:var(--spacing-lg);box-shadow:var(--shadow-lg)}.login-title[_ngcontent-%COMP%]{font-size:var(--font-size-3xl);font-weight:800;margin-bottom:var(--spacing-sm)}.login-subtitle[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-size:var(--font-size-base);margin:0}.alert[_ngcontent-%COMP%]{padding:var(--spacing-md) var(--spacing-lg);border-radius:var(--radius-md);margin-bottom:var(--spacing-xl);display:flex;align-items:center;gap:var(--spacing-md);animation:slideInRight .3s ease-out}.alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:var(--font-size-xl)}.alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:500}.alert-error[_ngcontent-%COMP%]{background-color:#ef44441a;border:1px solid var(--color-error);color:var(--color-error)}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-lg);margin-bottom:var(--spacing-xl)}.form-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);margin-bottom:var(--spacing-sm);font-weight:600;color:var(--color-text-primary)}.form-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--color-primary)}.form-control.error[_ngcontent-%COMP%]{border-color:var(--color-error)}.form-control.error[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #ef44441a}.error-message[_ngcontent-%COMP%]{display:block;margin-top:var(--spacing-xs);color:var(--color-error);font-size:var(--font-size-sm);font-weight:500}.login-btn[_ngcontent-%COMP%]{width:100%;margin-top:var(--spacing-md)}.login-footer[_ngcontent-%COMP%]{text-align:center;padding-top:var(--spacing-xl);border-top:1px solid var(--color-border-primary)}.login-info[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-size:var(--font-size-sm);margin-bottom:var(--spacing-md);display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm)}.login-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--color-info)}.login-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-primary);font-family:var(--font-mono)}.back-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--spacing-sm);color:var(--color-text-secondary);font-size:var(--font-size-sm);transition:all var(--transition-fast)}.back-link[_ngcontent-%COMP%]:hover{color:var(--color-primary);transform:translate(-5px)}"]})}}return i})();export{J as LoginComponent};
