import{a as i,b as a,f as o,l as n}from"./chunk-SI7HL3TP.js";var h=(()=>{class r{constructor(){this.STORAGE_KEY="portfolio_auth",this.SESSION_KEY="portfolio_session",this.DEFAULT_CREDENTIALS={username:"admin",password:"admin123"},this.isAuthenticatedSubject=new o(this.checkSession()),this.isAuthenticated$=this.isAuthenticatedSubject.asObservable(),localStorage.getItem(this.STORAGE_KEY)||this.saveCredentials(this.DEFAULT_CREDENTIALS)}checkSession(){try{return sessionStorage.getItem(this.SESSION_KEY)==="true"}catch{return!1}}saveCredentials(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Erreur lors de la sauvegarde des credentials:",t)}}getStoredCredentials(){try{let e=localStorage.getItem(this.STORAGE_KEY);if(e)return JSON.parse(e)}catch(e){console.error("Erreur lors de la r\xE9cup\xE9ration des credentials:",e)}return null}login(e,t){let s=this.getStoredCredentials();return s&&s.username===e&&s.password===t?(sessionStorage.setItem(this.SESSION_KEY,"true"),this.isAuthenticatedSubject.next(!0),!0):!1}logout(){sessionStorage.removeItem(this.SESSION_KEY),this.isAuthenticatedSubject.next(!1)}isAuthenticated(){return this.isAuthenticatedSubject.value}changePassword(e,t){let s=this.getStoredCredentials();return s&&s.password===e?(this.saveCredentials(a(i({},s),{password:t})),!0):!1}resetCredentials(){this.saveCredentials(this.DEFAULT_CREDENTIALS)}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{h as a};
