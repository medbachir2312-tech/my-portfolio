import{a as r,b as o,f as i,l as n}from"./chunk-SI7HL3TP.js";var l=(()=>{class a{constructor(){this.STORAGE_KEY="portfolio_messages",this.messagesSubject=new i(this.loadMessages()),this.messages$=this.messagesSubject.asObservable()}loadMessages(){try{let e=localStorage.getItem(this.STORAGE_KEY);if(e)return JSON.parse(e).map(t=>o(r({},t),{date:new Date(t.date)}))}catch(e){console.error("Erreur lors du chargement des messages:",e)}return[]}saveMessages(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)),this.messagesSubject.next(e)}catch(s){console.error("Erreur lors de la sauvegarde des messages:",s)}}getAllMessages(){return this.messages$}getUnreadMessages(){return this.messagesSubject.value.filter(e=>!e.read)}getUnreadCount(){return this.getUnreadMessages().length}addMessage(e){let s=this.messagesSubject.value,t=o(r({},e),{id:this.generateId(),date:new Date,read:!1});this.saveMessages([t,...s])}markAsRead(e){let s=this.messagesSubject.value,t=s.findIndex(g=>g.id===e);t!==-1&&(s[t].read=!0,this.saveMessages([...s]))}markAllAsRead(){let e=this.messagesSubject.value.map(s=>o(r({},s),{read:!0}));this.saveMessages(e)}deleteMessage(e){let s=this.messagesSubject.value.filter(t=>t.id!==e);this.saveMessages(s)}deleteAllMessages(){this.saveMessages([])}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static{this.\u0275fac=function(s){return new(s||a)}}static{this.\u0275prov=n({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();export{l as a};
